USE [ERPXL_NATOM]
GO
/****** Object:  Trigger [CDN].[ITA_UmwPozycje_DodanieAtrybutowDoUmowy]    Script Date: 7/29/2023 9:15:21 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



-- ======================================================================================================================================================--
-- Author:      PK																																		 --
-- Create date: 	22.05.2023																															 --
-- Description: Dla dokumentu Umowa, mimo iż atrybuty są zaznaczone jako automat, nie dodają się po utworzeniu umowy z OS, mechanizm dodaje te atrybuty. --
-- ======================================================================================================================================================--

ALTER TRIGGER [CDN].[ITA_UmwPozycje_DodanieAtrybutowDoUmowy]

ON [CDN].[UmwPozycje]

after insert

AS

	BEGIN
	SET NOCOUNT ON




	declare @CRMTyp int, @UmP_UmNId int
	declare @AtkIDPrzekazanoDo int, @AtkIDOsobaOdpowiedzialna int,  @AtkIDOsobaOdpowiedzialna2 int, @AtkIDWiadomosc int, @AtkIDBlokadaDat int
	declare @AtkIDAkceptacjaDatyRozpoczecia int, @AtkIDAkceptacjaDokumentacjaTechniczna int, @AtkIDAkceptacjaPrzygotowanieWykonanieWykonczenie int
	declare @AtkIDAkceptacjaDokumentacjaKlient int, @AtkIDNrZadania int, @AtkIDRysunekOfertowy int
	declare @AtkIDSruby int, @AtkIDWykonacMontaz int,  @AtkIDUPAK int, @AtkINowyBOM int, @AtkIOSKalkulacja int
	declare @AtkIDWykonacProbnyMontaz int, @AtkMagazyn int, @AtkIDPotwierdzenieZamowienia int, @AtkIDDataWyslaniaProjektow int, @AtkIDUmowaDoZamkniecia int
	declare @AtrLinia1 int = 163, @AtrLinia2 int = 164, @AtrLinia3 int = 165, @AtrLinia4 int = 178
	declare @AtrZakupyZrealizowane int, @AtrOcynkZrealizowany int, @AtrHarmonogramDostaw int
	declare @AtrBomZaimportowany int
	declare @AtrUmowaZBOM int
	declare @AtrTowarDostarczonyDoKlienta int
	declare @AtrKlientOtrzymalCalaUmowe int
	declare @AtrZakupyChociczaZrealizowane int
	declare @AtkIDOsobaOdpowiedzialnaZ2 int
	declare @ts int
	declare  @atkidtransportpelno int

	declare @dpdatap int
	declare @dpdatas int
	declare @dpdatam int
	declare @dpdataqg int
	declare @gotowoscdowysylki int

	declare @wykonacpomiargrubosci int

	declare @umowawyslanawterminie int
	declare @rzeczywistadatazaladunku int
	declare @rzeczywistadatadostawy int
	declare @kategorieproduktu int

	declare @nowadatadostawy int
	declare @wysyłkazgodniezharmonogramem int

	declare @rozpiskanacięcie int

			select  @UmP_UmNId = UmP_UmNId from inserted

			select @AtkIDPrzekazanoDo = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Przekazano do'
			select @AtkIDOsobaOdpowiedzialna = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Osoba odpowiedzialna'
			select @AtkIDOsobaOdpowiedzialna2 = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Osoba odpowiedzialna 2'
			select @AtkIDWiadomosc = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Wiadomosc'
			select @AtkIDBlokadaDat = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Blokada dat wyłączona'
			select @AtkIDAkceptacjaDatyRozpoczecia = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Akceptacja daty rozpoczęcia'
			select @AtkIDAkceptacjaDokumentacjaTechniczna = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Akceptacja dokumentacja techniczna'
			select @AtkIDAkceptacjaPrzygotowanieWykonanieWykonczenie = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Akceptacja Przygotowanie, Wykonanie, Wykończenie'
			select @AtkIDAkceptacjaDokumentacjaKlient = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Akceptacja dokumentacji - klient'
			select @AtkIDNrZadania = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Nr_Zadania'
			select @AtkIDRysunekOfertowy = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Rysunek ofertowy'
			select @AtkIDSruby = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Śruby - spakować elementy połączeniowe'
			select @rozpiskanacięcie = Atk_ID from cdn.AtrybutyKlasy where Atk_Nazwa = 'Rozpiska na cięcie'
			select @AtkIDWykonacMontaz = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Wykonać montaż przed wysyłką'

			select @AtkIDWykonacProbnyMontaz = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Wykonać próbny montaż'

			select @AtkIDUPAK = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'UPAK - Specjalne pakowanie'
			select @AtkINowyBOM = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Nowy BOM'
			select @AtkIOSKalkulacja = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'OS - Kalkulacja'
			select @AtkMagazyn = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Towar ze stanu magazynowego'

			select @AtkIDPotwierdzenieZamowienia = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Potwierdzenie zamówienia'
			select @AtkIDDataWyslaniaProjektow = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Data wysłania projektów do akceptacji'

			select @AtkIDUmowaDoZamkniecia = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Umowa do zamknięcia'

			select @AtrZakupyZrealizowane = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Z - zakupy zrealizowane'
			select @AtrOcynkZrealizowany = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Z - Ocynk zrealizowany'

			select @AtrBomZaimportowany = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'BOM zaimportowany'
			select @AtrUmowaZBOM = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Umowa z BOM'

			select @AtrHarmonogramDostaw = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Harmonogram dostaw'

			select @AtrTowarDostarczonyDoKlienta = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Towar dostarczony do klienta'
			select @AtrKlientOtrzymalCalaUmowe = Atk_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Klient otrzymał całą umowę'

			select @AtrZakupyChociczaZrealizowane = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Zakupy Chocicza zrealizowane'

			select @atkidtransportpelno = atk_id from cdn.AtrybutyKlasy where AtK_Nazwa = 'Transport pełnopojazdowy'

			select @AtkIDOsobaOdpowiedzialnaZ2 = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Osoba odpowiedzialna dział zakupów'

			select @dpdatap = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'DP Data P'
			select @dpdatas = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'DP Data S'
			select @dpdatam = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'DP Data M'
			select @dpdataqg = Atk_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'DP Data QG'

			select @gotowoscdowysylki = AtK_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Gotowość do wysyłki'

			select @wykonacpomiargrubosci = Atk_ID from cdn.AtrybutyKlasy where Atk_Nazwa = 'GRUBOŚĆ POWŁOKI ANTYKOROZYJNEJ POMIAR/ATEST'

			select @umowawyslanawterminie = Atk_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Umowa wysłana w terminie'
			select @rzeczywistadatazaladunku = Atk_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Rzeczywista data załadunku'
			select @rzeczywistadatadostawy = Atk_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Rzeczywista data dostawy'
			select @kategorieproduktu = Atk_ID from cdn.AtrybutyKlasy where AtK_Nazwa = 'Kategorie produktu'

			select @nowadatadostawy = Atk_Id from cdn.AtrybutyKlasy where AtK_Nazwa = 'Nowa data dostawy'
			select @wysyłkazgodniezharmonogramem = Atk_Id from cdn.AtrybutyKlasy where AtK_Nazwa = 'Wysyłka zgodnie z harmonogramem'

			select @ts=datediff(s, '1990-01-01', getdate())


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDPrzekazanoDo)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDPrzekazanoDo, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDOsobaOdpowiedzialna)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDOsobaOdpowiedzialna, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END

										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDOsobaOdpowiedzialna2)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDOsobaOdpowiedzialna2, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDWiadomosc)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDWiadomosc, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


					-------------------------------------------------------------------------------------------

						if not exists (select * from cdn.Atrybuty
										where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrLinia1)

										BEGIN

											insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
											select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrLinia1, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

										END
					---------------------------------------------------------------------------------------------
						

										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDAkceptacjaDatyRozpoczecia)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDAkceptacjaDatyRozpoczecia, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDAkceptacjaDokumentacjaTechniczna)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDAkceptacjaDokumentacjaTechniczna, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDAkceptacjaPrzygotowanieWykonanieWykonczenie)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDAkceptacjaPrzygotowanieWykonanieWykonczenie, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDAkceptacjaDokumentacjaKlient)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDAkceptacjaDokumentacjaKlient, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


					-----------------------------------------------------------------------------------------------------------------linia2

						if not exists (select * from cdn.Atrybuty
									where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrLinia2)

										BEGIN

											insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
											select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrLinia2, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

										END

					-----------------------------------------------------------------------------------------------------------------linia2


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDRysunekOfertowy)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDRysunekOfertowy, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END



										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDWykonacProbnyMontaz)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDWykonacProbnyMontaz, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END



										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDWykonacMontaz)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDWykonacMontaz, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDSruby)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDSruby, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END
														

														if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @rozpiskanacięcie)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @rozpiskanacięcie, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDUPAK)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDUPAK, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIOSKalkulacja)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIOSKalkulacja, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END

										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDPotwierdzenieZamowienia)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDPotwierdzenieZamowienia, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDDataWyslaniaProjektow)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDDataWyslaniaProjektow, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDUmowaDoZamkniecia)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDUmowaDoZamkniecia, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrUmowaZBOM)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrUmowaZBOM, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


					-----------------------------------------------------------------------------------------------------------------linia3

						if not exists (select * from cdn.Atrybuty
									where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrLinia3)

										BEGIN

											insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
											select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrLinia3, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

										END

					-----------------------------------------------------------------------------------------------------------------linia3


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrZakupyZrealizowane)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrZakupyZrealizowane, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrOcynkZrealizowany)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrOcynkZrealizowany, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


					-----------------------------------------------------------------------------------------------------------------linia4

						if not exists (select * from cdn.Atrybuty
									where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrLinia4)

										BEGIN

											insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
											select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrLinia4, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

										END

					-----------------------------------------------------------------------------------------------------------------linia4


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkINowyBOM)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkINowyBOM, 'TAK', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


									if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDBlokadaDat)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDBlokadaDat, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDNrZadania)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDNrZadania, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END

										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkMagazyn)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkMagazyn, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrBomZaimportowany)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrBomZaimportowany, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrHarmonogramDostaw)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrHarmonogramDostaw, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrTowarDostarczonyDoKlienta)

														BEGIN
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrTowarDostarczonyDoKlienta, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts
														END


										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrKlientOtrzymalCalaUmowe)

														BEGIN
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrKlientOtrzymalCalaUmowe, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts
														END

										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtrZakupyChociczaZrealizowane)

														BEGIN
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtrZakupyChociczaZrealizowane, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts
														END

														
										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId =  @atkidtransportpelno)

														BEGIN
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0,  @atkidtransportpelno, 'NIE', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts
														END

										if not exists (select * from cdn.Atrybuty
													where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @AtkIDOsobaOdpowiedzialnaZ2)

														BEGIN

															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)
															select 4800, 1204993, @UmP_UmNId, 0, 0, @AtkIDOsobaOdpowiedzialnaZ2, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts

														END
									
										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @dpdatap)
														BEGIN						
															
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)						
															select 4800, 1204993, @UmP_UmNId, 0, 0, @dpdatap, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts					
														
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @dpdatas)		
														BEGIN																	
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)								
															select 4800, 1204993, @UmP_UmNId, 0, 0, @dpdatas, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts															
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @dpdatam)		
														BEGIN																	
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)				
															select 4800, 1204993, @UmP_UmNId, 0, 0, @dpdatam, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts														
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @dpdataqg)		
														BEGIN																	
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)				
															select 4800, 1204993, @UmP_UmNId, 0, 0, @dpdataqg, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts														
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @gotowoscdowysylki)		
														BEGIN								
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)			
															select 4800, 1204993, @UmP_UmNId, 0, 0, @gotowoscdowysylki, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts															
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @wykonacpomiargrubosci)		
														BEGIN														
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)			
															select 4800, 1204993, @UmP_UmNId, 0, 0, @wykonacpomiargrubosci, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts																				
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @umowawyslanawterminie)							
														BEGIN																				
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)			
															select 4800, 1204993, @UmP_UmNId, 0, 0, @umowawyslanawterminie, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts																			
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @rzeczywistadatazaladunku)						
														BEGIN																		
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)				
															select 4800, 1204993, @UmP_UmNId, 0, 0, @rzeczywistadatazaladunku, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts												
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @rzeczywistadatadostawy)						
														BEGIN																			
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)		
															select 4800, 1204993, @UmP_UmNId, 0, 0, @rzeczywistadatadostawy, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts													
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @kategorieproduktu)		
														BEGIN																									
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)								
															select 4800, 1204993, @UmP_UmNId, 0, 0, @kategorieproduktu, '',  0,  0, 0, 0, 0, 0, 0, 0, 0, @ts																		
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @nowadatadostawy)		
														BEGIN																									
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)								
															select 4800, 1204993, @UmP_UmNId, 0, 0, @nowadatadostawy, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts																		
														END

										if not exists (select * from cdn.Atrybuty where Atr_ObiTyp = 4800 and Atr_ObiNumer = @UmP_UmNId and Atr_AtkId = @wysyłkazgodniezharmonogramem)		
														BEGIN																									
															insert into cdn.Atrybuty(Atr_ObiTyp, Atr_ObiFirma, Atr_ObiNumer, Atr_ObiLp, Atr_ObiSubLp, Atr_AtkId, Atr_Wartosc, Atr_AtrTyp, Atr_AtrFirma, Atr_AtrNumer, Atr_AtrLp, Atr_AtrSubLp, Atr_OptimaId, Atr_Grupujacy, Atr_Pozycja, Atr_GUID, Atr_LastMod)								
															select 4800, 1204993, @UmP_UmNId, 0, 0, @wysyłkazgodniezharmonogramem, '', 0, 0, 0, 0, 0, 0, 0, 0, 0, @ts																		
														END
											END
